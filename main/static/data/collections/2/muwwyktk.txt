The ongoing SARS-CoV-2 (severe acute respiratory syndrome coronavirus 2) pandemic has created urgent needs for intervention strategies to control the crisis. The spike (S) protein of the virus forms a trimer and catalyzes fusion between viral and target cell membranes - the first key step of viral infection. Here we report two cryo-EM structures, both derived from a single preparation of the full-length S protein, representing the prefusion (3.1Å resolution) and postfusion (3.3Å resolution) conformations, respectively. The spontaneous structural transition to the postfusion state under mild conditions is independent of target cells. The prefusion trimer forms a tightly packed structure with three receptor-binding domains clamped down by a segment adjacent to the fusion peptide, significantly different from recently published structures of a stabilized S ectodomain trimer. The postfusion conformation is a rigid tower-like trimer, but decorated by N-linked glycans along its long axis with almost even spacing, suggesting possible involvement in a mechanism protecting the virus from host immune responses and harsh external conditions. These findings advance our understanding of how SARS-CoV-2 enters a host cell and may guide development of vaccines and therapeutics.