This paper presents a stochastic optimization model for allocating and sharing a critical resource in the case of a pandemic. The demand for different entities peaks at different times, and an initial inventory from a central agency is to be allocated. The entities (states) may share the critical resource with a different state under a risk-averse condition. The model is applied to study the allocation of ventilator inventory in the COVID-19 pandemic by the Federal Emergency Management Agency of the U.S. Department of Homeland Security (FEMA) to different states in the US. Findings suggest that if less than 60% of the ventilator inventory is available for non-COVID-19 patients, FEMA's stockpile of 20,000 ventilators (as of 03/23/2020) would be nearly adequate to meet the projected needs. However, when more than 75% of the available ventilator inventory must be reserved for non-COVID-19 patients, various degrees of shortfall are expected. In an extreme case, where the demand is assumed to be concentrated in the top-most quartile of the forecast confidence interval, the total shortfall over the planning horizon (till 05/31/20) is about 28,500 ventilator days, with a peak shortfall of 2,700 ventilators on 04/12/20. The results also suggest that in the worse-than-average to severe demand scenario cases, NY requires between 7,600-9,200 additional ventilators for COVID-19 patients during its peak demand. However, between 400 to 2,000 of these ventilators can be given to a different state after the peak demand in NY has subsided.