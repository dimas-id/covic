We study global dynamics of an SIR model with vaccination, where we assume that individuals respond differently to dynamics of the epidemic. Their heterogeneous response is modeled by the Preisach hysteresis operator. We present a condition for the global stability of the infection-free equilibrium state. If this condition does not hold true, the model has a connected set of endemic equilibrium states characterized by different proportion of infected and immune individuals. In this case, we show that every trajectory converges either to an endemic equilibrium or to a periodic orbit. Under additional natural assumptions, the periodic attractor is excluded, and we guarantee the convergence of each trajectory to an endemic equilibrium state. The global stability analysis uses a family of Lyapunov functions corresponding to the family of branches of the hysteresis operator.