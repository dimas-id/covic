In this paper, we construct an extended SIR model with agents optimally choosing outdoor activities. We calibrate the model and match it to the data from the United States. The model predicts the epidemic in the United States very well. Without government intervention, our simulation shows that the epidemic peaks on 22 March, 2020 and ends on 29 August, 2022. By the end of the epidemic, more than 21 million people will be infected, and the death toll is close to 3.8 million. We further conduct counterfactual experiments to evaluate the effectiveness of different polices against the virus. We find that no single policy can effectively suppress the epidemic, and the most effective policy is a hybrid policy with lockdown and broadening testing. Lockdown policy alone is ineffective in controlling the epidemic as agents would have optimally stayed at home anyway if the infection risk is high even without a lockdown. Broadening testing solely will accelerate the return to normal life as there are fewer infected people hanging around. However, as people do not internalize the social costs of returning to normal life, the epidemic could get even worse. Increasing medical capacity without any other measures only has temporary effects on reducing the death toll. We also find that random testing is too inefficient unless a majority of population is infected.