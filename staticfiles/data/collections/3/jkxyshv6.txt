Mesenchymal stem cell (MSC) transplantation has been shown to be beneficial in treating cerebral ischemia. However, such benefit is limited by the low survival of transplanted MSCs in an ischemic microenvironment. Previous studies showed that melatonin pretreatment can increase MSC survival in the ischemic kidney. However, whether it will improve MSC survival in cerebral ischemia is unknown. Our study examined the effect of melatonin pretreatment on MSCs under ischemia-related conditions in vitro and after transplantation into ischemic rat brain. Results showed that melatonin pretreatment greatly increased survival of MSCs in vitro and reduced their apoptosis after transplantation into ischemic brain. Melatonin-treated MSCs (MT-MSCs) further reduced brain infarction and improved neurobehavioral outcomes. Angiogenesis, neurogenesis, and the expression of vascular endothelial growth factor (VEGF) were greatly increased in the MT-MSC-treated rats. Melatonin treatment increased the level of p-ERK1/2 in MSCs, which can be blocked by the melatonin receptor antagonist luzindole. ERK phosphorylation inhibitor U0126 completely reversed the protective effects of melatonin, suggesting that melatonin improves MSC survival and function through activating the ERK1/2 signaling pathway. Thus, stem cells pretreated by melatonin may represent a feasible approach for improving the beneficial effects of stem cell therapy for cerebral ischemia.