The technological foundation of smart manufacturing consists of cyber-physical systems and the Internet-of-Things (IoT). Despite smart manufacturing has become a key paradigm to promote the integration of manufacturing processes using digital technologies, the manufacturing processes themselves are designed by human experts in a traditional way and have limited ability to adapt their behavior to exceptional circumstances. We leverage the fact that each IoT device in a smart factory can be coupled with a digital twin – that is, a software artefact that faithfully represents the physical system using real-time sensor data – to envision a software architecture to support adaptation of the manufacturing process when divergence from reference practices occur.